<!DOCTYPE html>
<html lang="zh-cn">
<head>
    	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta name="author" content="GaryWang">
	<meta name='renderer' content='webkit'>
	<meta http-equiv='X-UA-Compatible' content='IE=Edge,chrome=1' >
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">
	<meta name="format-detection" content="email=no">
    <title>WDTWO Blog</title>
	<link href="/assets/css/style.css" rel="stylesheet" type="text/css">
	<link href="/assets/css/animate.css" rel="stylesheet" type="text/css">
	<link href="/assets/fontawesome-free-5.15.4-web/css/all.min.css" rel="stylesheet" type="text/css">
    
<meta name="generator" content="Hexo 7.3.0"></head>
<body class="light">

    <div class="loading flex">
        <div></div>
    </div>

    <!-- 调试信息 -->
    <!-- 
        <div style="background: #f0f0f0; padding: 10px; margin: 10px;">
            页面类型: post<br>
            页面路径: 2023/04/04/vue3-学习笔记.html<br>
            是否为文章页: true<br>
            是否为首页: false
        </div>
     -->
    <header class="flex flex-jus-between">
    <h1 class="header-title">
        <a href="/" class="header-title">
            WDTWO Blog
        </a>
    </h1>
    <div class="flex">
        <div class="menu-list animated">
            
                <a class="menu-item" href="/archives">目录</a>
            
                <a class="menu-item" href="/category">分类</a>
            
                <a class="menu-item" href="/tag">标签</a>
            
                <a class="menu-item" href="/static/mark/index.html">书签</a>
            
            <i class="fa fa-times mobile-close-menu"></i>
        </div>
        <i class="fa fa-search"></i>
        <i class="fa fa-bars mobile-menu"></i>
        <i class="fa fa-sun"></i>
        <i class="fa fa-moon"></i>
    </div>
</header>

<script>
    window.addEventListener('DOMContentLoaded',function(){
        // 搜索按钮点击事件
        document.querySelector('.fa-search').addEventListener('click',function(){
            showSearchPage()
        })
        document.querySelector('.search-page-bg').addEventListener('click',function(){
            hideSearchPage()
        })  
        // 显示菜单
        document.querySelector('.mobile-menu').addEventListener('click',function(){
            showMobileMenu()
        })
        document.querySelector('.mobile-close-menu').addEventListener('click',function(){
            hideMobileMenu()
        })
    })
</script>
    <div class="main">
        <!-- 添加 highlight.js 的样式 -->
<link rel="stylesheet" href="/assets/css/atom-one-dark-reasonable.css">
<link rel="stylesheet" href="/assets/css/markdown.css">
<div class="post-box flex flex-item-start">
    <article class="post">
    
        <h1 class="post-title t-c">vue3学习笔记</h1>
        <div class="post-meta t-c flex">
            <!-- 作者 -->
            <div>
                <i class="fa fa-user c-purple"></i>
                Gary Wang
             </div>
            <div>
                <i class="fa fa-calendar c-orange"></i>
                2023-04-04
            </div>
            
                <div>
                    <i class="fa fa-folder c-yellow"></i>
                    <a class="archive-item-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
                </div>
            
            
                <div>
                    <i class="fa fa-tags c-green"></i>
                    <a class="archive-item-tag-none-link" href="/tag/vue/" rel="tag">vue</a>
                </div>
            
        </div>
        <hr class="line">
        <div class="post-content">
            <h2 id="通过vite创建项目并本地启用"><a href="#通过vite创建项目并本地启用" class="headerlink" title="通过vite创建项目并本地启用"></a>通过vite创建项目并本地启用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//安装最新版</span><br>npm init vue@latest<br><span class="hljs-comment">//更新包</span><br>npm install<br><span class="hljs-comment">//本地启动</span><br>npm run dev<br><span class="hljs-comment">//发布</span><br>npm run build<br></code></pre></td></tr></table></figure>
<h3 id="配置项"><a href="#配置项" class="headerlink" title="配置项"></a>配置项</h3><p><code>nev.d.ts</code> 配置文件引用时候的文件类型<br>删除以后无法识别文件类型</p>
<h3 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h3><p>vite项目中<code>index.html</code>是入口文件,且在项目的最外层<br>配置根目录中的<code>index.html</code>文件,会直接影响显示效果<br>因为<code>index.html</code>文件中引用了main.js</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/src/main.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a>main.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 引用样式</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./assets/main.css&#x27;</span> <br><span class="hljs-comment">// 取出创建方法</span><br><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-comment">// 根组件</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-comment">// 创建应用</span><br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)<br><br><span class="hljs-comment">// 挂载到id=app的元素上</span><br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h2 id="vue2和vue3的区别"><a href="#vue2和vue3的区别" class="headerlink" title="vue2和vue3的区别"></a>vue2和vue3的区别</h2><ul>
<li>vue2选项式API OptionsApi</li>
<li>vue3组合式API CompositionApi<br>虽然在vue3支持选项式API,但是官方建议使用组合式API</li>
</ul>
<h2 id="setup语法糖"><a href="#setup语法糖" class="headerlink" title="setup语法糖"></a>setup语法糖</h2><p><code>setup</code>是组合式API的入口,在vue2中叫做<code>beforeCreate</code>,在vue3中叫做<code>setup</code><br><code>setup</code>中不能使用<code>this</code>,因为<code>this</code>指向的是vue实例,在<code>setup</code>中没有<code>this</code><br><code>setup</code>中不能使用生命周期钩子函数,因为<code>setup</code>是在组件创建之前执行的,生命周期钩子函数在组件创建之后执行<br><code>setup</code>中不能使用data,methods等,因为<code>setup</code>是在组件创建之前执行的,data和methods在组件创建之后执行<br>在vue3中 使用选项式api获取setup中的数据是可以获取到的,但是setup中获取vue2写法中的data数据是获取不到的</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="如果需要添加组件名"><a href="#如果需要添加组件名" class="headerlink" title="如果需要添加组件名"></a>如果需要添加组件名</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;App&#x27;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="或者安装插件"><a href="#或者安装插件" class="headerlink" title="或者安装插件"></a>或者安装插件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i vite-plugin-vue-setup-extend -D<br></code></pre></td></tr></table></figure>
<h4 id="引用-vite文件配置"><a href="#引用-vite文件配置" class="headerlink" title="引用 vite文件配置"></a>引用 vite文件配置</h4><p>vite.config.ts</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">VueSetup</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite-plugin-vue-setup-extend&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br>  <span class="hljs-attr">plugins</span>: [<br>    <span class="hljs-title function_">vue</span>(),<br>    <span class="hljs-title class_">VueSetup</span>(), <span class="hljs-comment">// 在此处追加调用</span><br>  ],<br>  <span class="hljs-attr">resolve</span>: &#123;<br>    <span class="hljs-attr">alias</span>: &#123;<br>      <span class="hljs-comment">// &#x27;@&#x27;: fileURLToPath(new URL(&#x27;./src&#x27;, import.meta.url)),</span><br>      <span class="hljs-comment">// &#x27;@&#x27;: &#x27;/path/to/your/project/src&#x27; // 通常情况下，这个路径会被自动设置为 src，所以这里可能需要调整为 &#x27;/&#x27;  </span><br>      <span class="hljs-comment">// 或者，如果你使用的是标准的 Vue CLI 风格的项目结构，下面的配置应该已经足够  </span><br>      <span class="hljs-string">&#x27;@&#x27;</span>: <span class="hljs-string">&#x27;/src&#x27;</span>  <br>    &#125;<br>  &#125;,<br>&#125;)<br><br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script setup name=<span class="hljs-string">&quot;app&quot;</span>&gt;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<h2 id="ref创建响应式数据"><a href="#ref创建响应式数据" class="headerlink" title="ref创建响应式数据"></a>ref创建响应式数据</h2><h3 id="创建基本类型的响应式数据"><a href="#创建基本类型的响应式数据" class="headerlink" title="创建基本类型的响应式数据"></a>创建基本类型的响应式数据</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 使用不需要添加value --&gt;</span><br>&#123;&#123;count&#125;&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br><span class="hljs-comment">// 更新数据需要使用count.value</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>) &#123;<br>    count.<span class="hljs-property">value</span>++<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="创建引用类型的响应式数据"><a href="#创建引用类型的响应式数据" class="headerlink" title="创建引用类型的响应式数据"></a>创建引用类型的响应式数据</h3><p>通过ref创建的引用类型数据可以整体替换</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zhangsan&#x27;</span>&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="reactive创建响应式数据"><a href="#reactive创建响应式数据" class="headerlink" title="reactive创建响应式数据"></a>reactive创建响应式数据</h2><p>通过reactive创建的引用类型数据不可以整体替换</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; reactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">reactive</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zhangsan&#x27;</span>&#125;)<br><span class="hljs-comment">// 错误代码</span><br>count = &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;lisi&#x27;</span>&#125;<br><span class="hljs-comment">// 正确整体替换代码</span><br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(count, &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;lisi&#x27;</span>&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="toRefs解构赋值"><a href="#toRefs解构赋值" class="headerlink" title="toRefs解构赋值"></a>toRefs解构赋值</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; reactive, toRefs &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">reactive</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zhangsan&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-string">&#x27;18&#x27;</span>&#125;)<br><span class="hljs-comment">// 解构赋值</span><br><span class="hljs-keyword">const</span> &#123; name, age &#125; = <span class="hljs-title function_">toRefs</span>(count)<br>name.<span class="hljs-property">value</span> = <span class="hljs-string">&#x27;lisi&#x27;</span><br><br><span class="hljs-comment">// 错误示例 不会响应式</span><br><span class="hljs-keyword">const</span> &#123; name, age &#125; = count<br></code></pre></td></tr></table></figure>

<h2 id="toRef解构赋值"><a href="#toRef解构赋值" class="headerlink" title="toRef解构赋值"></a>toRef解构赋值</h2><p>不常用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; reactive, toRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">reactive</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zhangsan&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-string">&#x27;18&#x27;</span>&#125;)<br><br><span class="hljs-keyword">const</span> x = <span class="hljs-title function_">toRef</span>(count,<span class="hljs-string">&#x27;name&#x27;</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x.<span class="hljs-property">value</span>)<br></code></pre></td></tr></table></figure>

<h2 id="computed计算属性"><a href="#computed计算属性" class="headerlink" title="computed计算属性"></a>computed计算属性</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref, computed &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">let</span> firstName = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;张&quot;</span>)<br><span class="hljs-keyword">let</span> lastName = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;三&quot;</span>)<br><span class="hljs-keyword">const</span> double = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> firstName.<span class="hljs-property">value</span> + lastName.<span class="hljs-property">value</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref, computed &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">let</span> firstName = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;张&quot;</span>)<br><span class="hljs-keyword">let</span> lastName = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;三&quot;</span>)<br><span class="hljs-keyword">const</span> double = <span class="hljs-title function_">computed</span>(&#123;<br>    <span class="hljs-title function_">set</span>(<span class="hljs-params">val</span>)&#123;<br>        <span class="hljs-keyword">const</span> [str1,str2] = val.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;-&quot;</span>)<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> = str1<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> = str2<br>    &#125;,<br>    <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> firstName.<span class="hljs-property">valu</span> + lastName.<span class="hljs-property">value</span><br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h2><p><code>watch</code>可以监控四种类型的数据</p>
<ul>
<li><code>ref</code>定义的数据</li>
<li><code>reactive</code>定义的数据</li>
<li>一个函数返回的值(getter返回的值)</li>
<li>以上类型组成的数组<br>三个变量: </li>
<li>第一个变量是被监视的对象</li>
<li>第二个为回调函数</li>
<li>第三个为配置对象</li>
</ul>
<h3 id="解除变量的监控"><a href="#解除变量的监控" class="headerlink" title="解除变量的监控"></a>解除变量的监控</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref,watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">let</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;<br>  count.<span class="hljs-property">value</span> += <span class="hljs-number">1</span><br>&#125;<br><span class="hljs-keyword">const</span> stopWatch = <span class="hljs-title function_">watch</span>(count, <span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;watch变化了&#x27;</span>, newValue, oldValue);<br>  <span class="hljs-keyword">if</span>(newValue &gt; <span class="hljs-number">10</span>)&#123;<br>    <span class="hljs-title function_">stopWatch</span>() <span class="hljs-comment">// 停止监控</span><br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<h3 id="第一种情况-监控ref创建的的变量"><a href="#第一种情况-监控ref创建的的变量" class="headerlink" title="第一种情况:监控ref创建的的变量"></a>第一种情况:监控ref创建的的变量</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref,watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">let</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;<br>  count.<span class="hljs-property">value</span> += <span class="hljs-number">1</span><br>&#125;<br><span class="hljs-title function_">watch</span>(count, <span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;watch变化了&#x27;</span>, newValue, oldValue);<br>&#125;)<br></code></pre></td></tr></table></figure>
<h3 id="第二种情况-监控ref创建的引用类型变量"><a href="#第二种情况-监控ref创建的引用类型变量" class="headerlink" title="第二种情况:监控ref创建的引用类型变量"></a>第二种情况:监控ref创建的引用类型变量</h3><p>如果需要开启深度监控，需要设置<code>deep:true</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref,watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">let</span> count = <span class="hljs-title function_">ref</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zhangsan&#x27;</span>&#125;)<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;<br>    count.<span class="hljs-property">value</span>.<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;lisi&#x27;</span><br>&#125;<br><span class="hljs-title function_">watch</span>(count, <span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;watch变化了&#x27;</span>, newValue, oldValue);<br>&#125;,&#123;<span class="hljs-attr">deep</span>:<span class="hljs-literal">true</span>&#125;)<br></code></pre></td></tr></table></figure>
<h3 id="第三种情况-监控reactive创建的变量"><a href="#第三种情况-监控reactive创建的变量" class="headerlink" title="第三种情况:监控reactive创建的变量"></a>第三种情况:监控reactive创建的变量</h3><p>reactive类型默认开启了深度监控,不需要在配置中添加<code>deep:true</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; reactive,watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">let</span> count = <span class="hljs-title function_">reactive</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zhangsan&#x27;</span>&#125;)<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;<br>    count.<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;lisi&#x27;</span><br>&#125;<br><span class="hljs-title function_">watch</span>(count, <span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;watch变化了&#x27;</span>, newValue, oldValue);<br>&#125;)<br></code></pre></td></tr></table></figure>
<h3 id="第四种情况-监控一个函数返回的值"><a href="#第四种情况-监控一个函数返回的值" class="headerlink" title="第四种情况:监控一个函数返回的值"></a>第四种情况:监控一个函数返回的值</h3><p>如果你想监控一个对象中的某个属性，那么需要使用函数返回这个属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; reactive,watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">const</span> obj = <span class="hljs-title function_">reactive</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zhangsan&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>,<span class="hljs-attr">car</span>:&#123;<span class="hljs-attr">c1</span>:<span class="hljs-string">&#x27;奔驰&#x27;</span>,<span class="hljs-attr">c2</span>:<span class="hljs-string">&#x27;奥迪&#x27;</span>&#125;&#125;)<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;<br>    obj.<span class="hljs-property">age</span> ++;<br>&#125;<br><span class="hljs-comment">// 使用箭头函数返回需要监控的属性</span><br><span class="hljs-title function_">watch</span>( <span class="hljs-function">() =&gt;</span> obj.<span class="hljs-property">age</span>, <span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;obj.age变化了&#x27;</span>, newValue, oldValue);<br>&#125;)<br><span class="hljs-comment">// 如果被监控的是一个对象则需要用函数式 并且开启深度监控</span><br><span class="hljs-comment">// 如果使用只使用obj.car则会触发内部改变 </span><br><span class="hljs-comment">// 如果只使用()=&gt;obj.car不开启深度监控 则整体改变会触发 内部不会触发</span><br><span class="hljs-title function_">watch</span>( <span class="hljs-function">() =&gt;</span> obj.<span class="hljs-property">car</span>, <span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;obj.car&#x27;</span>, newValue, oldValue);<br>&#125;,&#123;<span class="hljs-attr">deep</span>:<span class="hljs-literal">true</span>&#125;)<br></code></pre></td></tr></table></figure>
<h3 id="第五种情况-监控多个变量"><a href="#第五种情况-监控多个变量" class="headerlink" title="第五种情况:监控多个变量"></a>第五种情况:监控多个变量</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; reactive,watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">let</span> count = <span class="hljs-title function_">reactive</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zhangsan&#x27;</span>&#125;)<br><span class="hljs-keyword">let</span> count2 = <span class="hljs-title function_">reactive</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;lisi&#x27;</span>&#125;)<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;<br>    count = <span class="hljs-string">&#x27;wangwu&#x27;</span><br>&#125;<br><span class="hljs-comment">// 如果count count2是基本数据类型则需要使用函数返回值 ()=&gt;count</span><br><span class="hljs-title function_">watch</span>([count, count2], <span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;count, count2变化了&#x27;</span>, newValue, oldValue);<br>&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a>watchEffect</h2><p><code>watchEffect</code>可以监控任意类型的数据，包括ref和reactive创建的变量<br>启用默认执行一次 不需要指定变量 在函数中用到了哪个变量就会监控哪个变量 没有用到的不会监控</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref,watchEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">let</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;<br>    count ++<br>&#125;<br><span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// 函数中用了哪个属性就会自动监视哪个属性 无需定义</span><br>    <span class="hljs-keyword">if</span>(count.<span class="hljs-property">value</span> &gt; <span class="hljs-number">10</span>)&#123; &#125;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;watchEffect变化了&#x27;</span>, count);<br>&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="ref-获取dom"><a href="#ref-获取dom" class="headerlink" title="ref()获取dom"></a>ref()获取dom</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#x27;hello&#x27;</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; ref,onMounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">let</span> hello = <span class="hljs-title function_">ref</span>()</span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">()=&gt;</span>&#123;</span><br><span class="language-javascript">  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hello.<span class="hljs-property">value</span>.<span class="hljs-property">innerText</span>);</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="获取组件的内容则需要在组件中设置-否则只能获取到组件实例"><a href="#获取组件的内容则需要在组件中设置-否则只能获取到组件实例" class="headerlink" title="获取组件的内容则需要在组件中设置 否则只能获取到组件实例"></a>获取组件的内容则需要在组件中设置 否则只能获取到组件实例</h3><h4 id="父组件"><a href="#父组件" class="headerlink" title="父组件"></a>父组件</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">Hello</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#x27;hello&#x27;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">import</span> &#123; ref,onMounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript">    <span class="hljs-keyword">import</span> <span class="hljs-title class_">Hello</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Hello.vue&#x27;</span></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> hello = <span class="hljs-title function_">ref</span>()</span><br><span class="language-javascript">    <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">()=&gt;</span>&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hello.<span class="hljs-property">value</span>.<span class="hljs-property">aaa</span>);</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h4 id="子组件hello-vue"><a href="#子组件hello-vue" class="headerlink" title="子组件hello.vue"></a>子组件hello.vue</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;ref,defineExpose&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-title function_">defineProps</span>(&#123;<br>  <span class="hljs-attr">msg</span>: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,<br>    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span><br>  &#125;<br>&#125;)<br><span class="hljs-keyword">const</span> aaa = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;Hello World!&#x27;</span>)<br><span class="hljs-title function_">defineExpose</span>(&#123;aaa&#125;) <span class="hljs-comment">// 此处使用defineExpose暴露出数据</span><br></code></pre></td></tr></table></figure>

<h2 id="vue3中使用ts"><a href="#vue3中使用ts" class="headerlink" title="vue3中使用ts"></a>vue3中使用ts</h2><p>新建一个<code>types</code>文件夹,然后创建一个<code>index.ts</code>文件</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// 新建一个接口</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Personinter</span> &#123;<br>    <span class="hljs-attr">id</span>:<span class="hljs-built_in">string</span>,<br>    <span class="hljs-attr">name</span>:<span class="hljs-built_in">string</span>,<br>    <span class="hljs-attr">age</span>:<span class="hljs-built_in">number</span><br>&#125;<br><span class="hljs-comment">// 创建一个类型别名 Personinter类型的数组</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Perons</span> = <span class="hljs-title class_">Personinter</span>[]<br></code></pre></td></tr></table></figure>
<p>引用<code>types/index.ts</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-comment">// 此处Personinter和Perons是规则 所以需要添加type</span><br><span class="hljs-keyword">import</span> &#123;type <span class="hljs-title class_">Perons</span>,type <span class="hljs-title class_">Personinter</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./types&#x27;</span><br><span class="hljs-comment">// &lt;&gt;泛型</span><br><span class="hljs-keyword">let</span> person = ref&lt;<span class="hljs-title class_">Personinter</span>&gt;(&#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;zhangsan&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;)<br><span class="hljs-keyword">let</span> persons = ref&lt;<span class="hljs-title class_">Perons</span>&gt;([&#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;zhangsan&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;])<br></code></pre></td></tr></table></figure>

<h2 id="组件通信"><a href="#组件通信" class="headerlink" title="组件通信"></a>组件通信</h2><h3 id="父组件向子组件传值"><a href="#父组件向子组件传值" class="headerlink" title="父组件向子组件传值"></a>父组件向子组件传值</h3><p>父组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Hello</span> <span class="hljs-attr">a</span>=<span class="hljs-string">&quot;哈哈&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">import</span> <span class="hljs-title class_">Hello</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Hello.vue&#x27;</span></span><br><span class="language-javascript">    <span class="hljs-keyword">import</span> &#123;ref&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> msg = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;Hello World!&#x27;</span>)</span><br><span class="language-javascript">    <span class="hljs-comment">// 组件通信</span></span><br><span class="language-javascript">    <span class="hljs-comment">// 父组件向子组件传值</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>子组件<br>接收到可以直接使用<br>如果需要有操作则可以使用返回值<code>props</code>操作<br><code>defineProps</code>可以直接使用不需要引入</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    &#123;&#123; a &#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 接收父组件传值</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">&#x27;a&#x27;</span>])</span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props.<span class="hljs-property">a</span>);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="子组件给父组件限制类型"><a href="#子组件给父组件限制类型" class="headerlink" title="子组件给父组件限制类型"></a>子组件给父组件限制类型</h3><p>接收<code>person</code>参数并限制类型为<code>Persons</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> type &#123; <span class="hljs-title class_">Persons</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/types&#x27;</span><br><span class="hljs-comment">//person?:Persons 可以不传值不会报错</span><br>defineProps&lt;&#123;<span class="hljs-attr">person</span>:<span class="hljs-title class_">Persons</span>&#125;&gt;()<br></code></pre></td></tr></table></figure>
<h3 id="限制类型限制必要性设置默认值"><a href="#限制类型限制必要性设置默认值" class="headerlink" title="限制类型限制必要性设置默认值"></a>限制类型限制必要性设置默认值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> type &#123; <span class="hljs-title class_">Persons</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/types&#x27;</span><br><span class="hljs-title function_">withDefaults</span>(defineProps&lt;&#123;person?:<span class="hljs-title class_">Persons</span>&#125;&gt;(),&#123;<br>    <span class="hljs-attr">person</span>:<span class="hljs-function">()=&gt;</span>[&#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;0&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;jiayi&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">10</span>&#125;]<br>&#125;)<br></code></pre></td></tr></table></figure>
<p>多个参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 使用 defineProps 和 withDefaults 定义 person 和 args1 props，并为它们提供默认值</span><br><span class="hljs-keyword">const</span> props = <span class="hljs-title function_">withDefaults</span>(defineProps&lt;&#123; person?: <span class="hljs-title class_">Persons</span>; args1?: string &#125;&gt;(), &#123;<br>    <span class="hljs-attr">person</span>: <span class="hljs-function">() =&gt;</span> [&#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;jiayi&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">10</span> &#125;],<br>    <span class="hljs-attr">args1</span>: <span class="hljs-string">&#x27;default value&#x27;</span> <span class="hljs-comment">// 设置 args1 的默认值</span><br>&#125;)<br><span class="hljs-comment">// 现在你可以在组件中使用 props.person 和 props.args1</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props.<span class="hljs-property">person</span>) <span class="hljs-comment">// 默认值: [&#123; id: &#x27;0&#x27;, name: &#x27;jiayi&#x27;, age: 10 &#125;]</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props.<span class="hljs-property">args1</span>)  <span class="hljs-comment">// 默认值: &#x27;default value&#x27;</span><br></code></pre></td></tr></table></figure>

<h2 id="vue3生命周期"><a href="#vue3生命周期" class="headerlink" title="vue3生命周期"></a>vue3生命周期</h2><p>与vue2基本相同<br>区别是vue2的创建分创建前<code>beforeCreate</code>和创建完成<code>created</code><br>销毁是<code>beforeDestroy</code>和销毁完成<code>destroyed</code></p>
<ul>
<li>创建  <code>setup</code></li>
<li>挂载  <code>onBeforeMount</code> <code>onMounted</code></li>
<li>更新  <code>onBeforeUpdate</code> <code>onUpdated</code></li>
<li>卸载  <code>onBeforeUnmount</code> <code>onUnmounted</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; onMounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;挂载完成&#x27;</span>)<br>&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h2><p><code>Hooks</code>是将<code>setup</code>函数中使用的数据和函数进行分离,进行<code>模块化管理</code><br>vue3中使用<code>Hooks</code>进行相同功能块存放到一个js文件中维护</p>
<h3 id="创建Hooks文件"><a href="#创建Hooks文件" class="headerlink" title="创建Hooks文件"></a>创建Hooks文件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//引用Hooks文件</span></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> useCount <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/hooks/useCount&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> usePerson <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/hooks/usePerson&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-comment">// 调用Hooks</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> &#123; count, add &#125; = <span class="hljs-title function_">useCount</span>()</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> &#123; person &#125; = <span class="hljs-title function_">usePerson</span>()</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 计算模块 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>count add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 列表展示模块 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in person&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>        &#123;&#123; item.id &#125;&#125; &#123;&#123; item.name &#125;&#125; &#123;&#123; item.age &#125;&#125;<br>      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>useCount.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;ref&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">let</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;<br>        count.<span class="hljs-property">value</span>++<br>    &#125;<br>    <span class="hljs-keyword">return</span> &#123;count,add&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>usePerson.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; reactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> type &#123; <span class="hljs-title class_">Persons</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/types/index.ts&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">const</span> person = reactive&lt;<span class="hljs-title class_">Persons</span>&gt;([<br>        &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;wamg&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;,<br>        &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&quot;2&quot;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;li&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">20</span>&#125;,<br>        &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&quot;3&quot;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;zhou&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">30</span>,<span class="hljs-attr">x</span>:<span class="hljs-number">10</span>&#125;<br>    ])<br>    <span class="hljs-keyword">return</span> &#123;person&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>和vue2基本相同<br>router是路由器<br>route是路由器中的路由<br>所以创建路由器是<code>createRouter</code><br>创建路由是<code>routes</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">HomeView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../views/HomeView.vue&#x27;</span><br><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;<br>  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>), <span class="hljs-comment">// 路由工作模式</span><br>  <span class="hljs-attr">routes</span>: [<br>    &#123;<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;home&#x27;</span>,<br>      <span class="hljs-attr">component</span>: <span class="hljs-title class_">HomeView</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/about&#x27;</span>,<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;about&#x27;</span>,<br>      <span class="hljs-comment">// route level code-splitting</span><br>      <span class="hljs-comment">// this generates a separate chunk (About.[hash].js) for this route</span><br>      <span class="hljs-comment">// which is lazy-loaded when the route is visited.</span><br>      <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../views/AboutView.vue&#x27;</span>)<br>    &#125;<br>  ]<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 跳转路由地址 --&gt;</span><br><span class="hljs-comment">&lt;!-- 字符串写法 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/home&quot;</span> <span class="hljs-attr">active-class</span>=<span class="hljs-string">&quot;active&quot;</span>&gt;</span>go home<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 对象path跳转 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123;path:&#x27;/about&#x27;,query:&#123;a:1&#125;&#125;&quot;</span>&gt;</span>go about<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 对象name跳转 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123;name:&#x27;/about&#x27;,query:&#123;a:1&#125;&#125;&quot;</span>&gt;</span>go about<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 路由展示 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">RouterView</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">RouterLink</span>, <span class="hljs-title class_">RouterView</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>一般组价放在<code>components</code>文件夹中<br>路由组件放在<code>views</code>或者<code>pages</code>文件夹中</p>
</blockquote>
<h3 id="路由的工作模式"><a href="#路由的工作模式" class="headerlink" title="路由的工作模式"></a>路由的工作模式</h3><ul>
<li>路由模式 不到<code>/#/</code><ul>
<li>vue2:mode:’history’</li>
<li>vue3:history:createWebHistory()</li>
<li>react:history:createBrowserHistory()</li>
</ul>
</li>
<li>hash模式 带<code>/#/</code><ul>
<li>vue3:history:createWebHashHistory()</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;<br>  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(), <span class="hljs-comment">// 路由模式</span><br>  <span class="hljs-attr">routes</span>: [<br>    &#123;<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;home&#x27;</span>,<br>      <span class="hljs-attr">component</span>: <span class="hljs-title class_">HomeView</span><br>    &#125;<br>  ]<br>&#125;)<br></code></pre></td></tr></table></figure>
<h3 id="路由嵌套"><a href="#路由嵌套" class="headerlink" title="路由嵌套"></a>路由嵌套</h3><p>引用嵌套路由的页面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/about/person&quot;</span>&gt;</span>打开person组件<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">RouterView</span> /&gt;</span><br></code></pre></td></tr></table></figure>
<p>router.ts</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/about&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;about&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../views/AboutView.vue&#x27;</span>),<br>    <span class="hljs-attr">children</span>: [<br>        &#123;<br>            <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;person&#x27;</span>, <span class="hljs-comment">// 此处不需要添加/</span><br>            <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;person&#x27;</span>,<br>            <span class="hljs-attr">component</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../views/PersonView.vue&#x27;</span>)<br>        &#125;<br>    ]<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="路由传参"><a href="#路由传参" class="headerlink" title="路由传参"></a>路由传参</h3><h4 id="query传参"><a href="#query传参" class="headerlink" title="query传参"></a>query传参</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/about/person?a=哈哈&quot;</span>&gt;</span>打开person组件<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123;path:&#x27;/about/person&#x27;,query:&#123;a:&#x27;哈哈&#x27;&#125;&#125;&quot;</span>&gt;</span>打开person组件<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123;name:&#x27;person&#x27;,query:&#123;a:&#x27;哈哈&#x27;&#125;&#125;&quot;</span>&gt;</span>打开person组件<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>接收</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 子组件</span><br><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(route.<span class="hljs-property">query</span>) <span class="hljs-comment">// &#123;a:&#x27;哈哈&#x27;&#125;</span><br></code></pre></td></tr></table></figure>

<h4 id="params传参"><a href="#params传参" class="headerlink" title="params传参"></a>params传参</h4><p>注意点:</p>
<ol>
<li>使用<code>:to</code>不能使用<code>path</code>只能使用<code>name</code></li>
<li>需要在路由中提前占位</li>
<li>参数只能是字符串,不能是对象或者数组</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/about/person/123/名称&quot;</span>&gt;</span>打开person组件<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 此处不能使用path 如果使用path则会被自动忽略 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123;name:&#x27;person&#x27;,params:&#123;id:123,name:&#x27;名称&#x27;&#125;&#125;&quot;</span>&gt;</span>打开person组件<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>router.ts</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">children</span>: [<br>    &#123;<br>        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;person&#x27;</span>,<br>        <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;person/:id/:name?&#x27;</span>, <span class="hljs-comment">// 此处需要配置参数 加?表示可以不传  如果不加问号不传会报错</span><br>        <span class="hljs-attr">component</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../views/PersonView.vue&#x27;</span>)<br>    &#125;<br>]<br></code></pre></td></tr></table></figure>
<p>接收</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 子组件</span><br><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(route.<span class="hljs-property">params</span>) <span class="hljs-comment">// &#123;id:123,name:&#x27;名称&#x27;&#125;</span><br></code></pre></td></tr></table></figure>

<h4 id="路由规则的props配置"><a href="#路由规则的props配置" class="headerlink" title="路由规则的props配置"></a>路由规则的props配置</h4><p>第一种写法 : 将路由收到的所有params参数作为props参数传给子组件<br>需要和params配合 如果使用query传参则会报错</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">children</span>: [<br>    &#123;<br>        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;person&#x27;</span>,<br>        <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;person/:id/:name?&#x27;</span>,<br>        <span class="hljs-attr">component</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../views/PersonView.vue&#x27;</span>),<br>        <br>        <span class="hljs-attr">props</span>:<span class="hljs-literal">true</span>, <br>    &#125;<br>]<br></code></pre></td></tr></table></figure>
<p>接收</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 子组件</span><br><span class="hljs-keyword">import</span> &#123; defineProps &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br>    <span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;name&#x27;</span>])<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props) <span class="hljs-comment">// &#123;id:123,name:&#x27;名称&#x27;&#125;</span><br></code></pre></td></tr></table></figure>
<p>第二种写法:可以自定义传递的参数类型 可以是<code>query</code>也可是<code>params</code>但是<code>params</code>没有必要</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">children</span>: [<br>    &#123;<br>        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;person&#x27;</span>,<br>        <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;person/:id/:name?&#x27;</span>,<br>        <span class="hljs-attr">component</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../views/PersonView.vue&#x27;</span>),<br>        <span class="hljs-attr">props</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">route</span>)&#123;<br>            <span class="hljs-keyword">return</span> route.<span class="hljs-property">query</span><br>        &#125;, <br>    &#125;<br>]<br></code></pre></td></tr></table></figure>
<p>第三种写法: 传对象 基本不会用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">children</span>: [<br>    &#123;<br>        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;person&#x27;</span>,<br>        <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;person/:id/:name?&#x27;</span>,<br>        <span class="hljs-attr">component</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../views/PersonView.vue&#x27;</span>),<br>        <span class="hljs-attr">props</span>:&#123;<br>            <span class="hljs-attr">a</span>:<span class="hljs-number">100</span>,<br>            <span class="hljs-attr">b</span>:<span class="hljs-number">200</span><br>        &#125;<br>    &#125;<br>]<br></code></pre></td></tr></table></figure>

<h3 id="路由的replace模式-禁止后退"><a href="#路由的replace模式-禁止后退" class="headerlink" title="路由的replace模式 禁止后退"></a>路由的replace模式 禁止后退</h3><p>默认是<code>push</code>模式 点击后退会返回上一个页面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/about/person&quot;</span>&gt;</span>打开person组件<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><code>replace</code>模式只需要再<code>RouterLink</code>中添加<code>replace</code>属性即可</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/about/person&quot;</span> <span class="hljs-attr">replace</span>&gt;</span>打开person组件<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="通过js控制路由跳转"><a href="#通过js控制路由跳转" class="headerlink" title="通过js控制路由跳转"></a>通过js控制路由跳转</h3><p>参数和<code>:to</code>的参数是一样的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;useRouter&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()<br><span class="hljs-comment">// 第一种 push</span><br>router.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;/about/person&#x27;</span>)<br>router.<span class="hljs-title function_">push</span>(&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;person&#x27;</span>,<span class="hljs-attr">query</span>:&#123;<span class="hljs-attr">a</span>:<span class="hljs-number">1</span>&#125;&#125;)<br><span class="hljs-comment">// 第二种 replace</span><br>router.<span class="hljs-title function_">replace</span>(<span class="hljs-string">&#x27;/about/person&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-attr">path</span>:<span class="hljs-string">&quot;/&quot;</span>,<br>    <span class="hljs-attr">redirect</span>:<span class="hljs-string">&quot;/about&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="路由守卫"><a href="#路由守卫" class="headerlink" title="路由守卫"></a>路由守卫</h2><h3 id="全局守卫"><a href="#全局守卫" class="headerlink" title="全局守卫"></a>全局守卫</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to,<span class="hljs-keyword">from</span></span>)=&gt;</span>&#123;<br>    <span class="hljs-comment">// 是错误页面或者认证页面</span><br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;certification&#x27;</span>) || <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;error&#x27;</span>))&#123;<br>      header.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span><br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>      header.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span><br>    &#125;<br>     <span class="hljs-title function_">next</span>()<br>&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="pinia-集中式状态管理"><a href="#pinia-集中式状态管理" class="headerlink" title="pinia 集中式状态管理"></a>pinia 集中式状态管理</h2><p><code>要把共享的数据存放在pinia中,而不是组件自身的数据</code></p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install pinia<br></code></pre></td></tr></table></figure>
<h3 id="创建pinia"><a href="#创建pinia" class="headerlink" title="创建pinia"></a>创建pinia</h3><p><code>main.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 引入</span><br><span class="hljs-keyword">import</span> &#123; createPinia &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)<br><span class="hljs-comment">// 创建pinia</span><br><span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>()<br><span class="hljs-comment">// 挂载</span><br>app.<span class="hljs-title function_">use</span>(pinia)<br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>
<h3 id="创建store"><a href="#创建store" class="headerlink" title="创建store"></a>创建store</h3><p><code>store/count.ts</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;defineStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><span class="hljs-comment">// useCountStore是遵从hooks的规则</span><br><span class="hljs-comment">// 第一个参数是store的id</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCountStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;count&#x27;</span>,&#123;<br>    <span class="hljs-title function_">state</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">sum</span>:<span class="hljs-number">10</span><br>        &#125;<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>
<h3 id="引用并使用数据"><a href="#引用并使用数据" class="headerlink" title="引用并使用数据"></a>引用并使用数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;useCountStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/store/count&#x27;</span><br><span class="hljs-keyword">const</span> countStore = <span class="hljs-title function_">useCountStore</span>()<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(countStore.<span class="hljs-property">sum</span>) <span class="hljs-comment">// 打印出来的就是store中的数据</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(countStore.<span class="hljs-property">$state</span>.<span class="hljs-property">sum</span>) <span class="hljs-comment">// 打印出来的就是store中的数据</span><br></code></pre></td></tr></table></figure>
<h3 id="修改数据的三种方式"><a href="#修改数据的三种方式" class="headerlink" title="修改数据的三种方式"></a>修改数据的三种方式</h3><h4 id="第一种"><a href="#第一种" class="headerlink" title="第一种"></a>第一种</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 直接操作</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;<br>    countStore.<span class="hljs-property">sum</span>++;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="第二种"><a href="#第二种" class="headerlink" title="第二种"></a>第二种</h4><p><code>可同时修改多条数据只走一次event</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;<br>    countStore.$patch(&#123;<br>        <span class="hljs-attr">sum</span>:countStore.<span class="hljs-property">sum</span> + <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;哈哈&#x27;</span><br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="第三种"><a href="#第三种" class="headerlink" title="第三种"></a>第三种</h4><p>需要在store中定义<code>actions</code><br><code>count.ts</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;defineStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCountStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;count&#x27;</span>,&#123;<br>    <span class="hljs-attr">actions</span>:&#123;<br>        <span class="hljs-title function_">add</span>(<span class="hljs-params">value:number</span>)&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">sum</span> += value<br>        &#125;<br>    &#125;,<br>    <span class="hljs-title function_">state</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">sum</span>:<span class="hljs-number">10</span><br>        &#125;<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>
<p><code>组件中调用</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;useCountStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/store/count&#x27;</span><br><span class="hljs-keyword">const</span> countStore = <span class="hljs-title function_">useCountStore</span>()<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-comment">// 调用pinia中的actions中的方法</span><br>    countStore.<span class="hljs-title function_">add</span>(<span class="hljs-number">10</span>)<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="storeToRefs"><a href="#storeToRefs" class="headerlink" title="storeToRefs"></a>storeToRefs</h3><p><code>storeToRefs</code>可以将<code>pinia</code>中的数据转换为响应式数据<br>虽然<code>toRefs</code>也可以,但是<code>storeToRefs</code>可以自动识别<code>pinia</code>中的数据,<code>toRefs</code>会把<code>pinia</code>中的所有数据全都转换为<code>reactive</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;storeToRefs&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><span class="hljs-keyword">const</span> countStore = <span class="hljs-title function_">useCountStore</span>()<br><span class="hljs-keyword">const</span> &#123;sum&#125; = <span class="hljs-title function_">storeToRefs</span>(countStore)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sum) <span class="hljs-comment">// 打印出来的就是响应式数据</span><br></code></pre></td></tr></table></figure>
<h3 id="getters"><a href="#getters" class="headerlink" title="getters"></a>getters</h3><p><code>pinia</code>中的<code>getters</code>和<code>vuex</code>中是一样的,都是用来对数据进行加工的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;defineStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCountStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;count&#x27;</span>,&#123;<br>    <span class="hljs-title function_">state</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">sum</span>:<span class="hljs-number">10</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">getters</span>:&#123;<br>        <span class="hljs-comment">// 如果使用this 则不能使用箭头函数</span><br>        <span class="hljs-title function_">bigSum</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">100</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">sum</span><br>        &#125;,<br>        <span class="hljs-comment">// 使用箭头函数则需要传参数state</span><br>        <span class="hljs-attr">bigSum2</span>:<span class="hljs-function"><span class="hljs-params">state</span>=&gt;</span>state.<span class="hljs-property">sum</span> + <span class="hljs-number">100</span><br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>
<h3 id="subscribe-订阅"><a href="#subscribe-订阅" class="headerlink" title="$subscribe 订阅"></a>$subscribe 订阅</h3><p><code>$subscribe</code>是用来监听pinia中数据的改变的,当数据改变的时候就会执行回调函数<br>类似于vuex中的<code>watch</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;userCountStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/store/count&#x27;</span><br><span class="hljs-keyword">const</span> countStore = <span class="hljs-title function_">useCountStore</span>()<br>countStore.$subscribe(<span class="hljs-function">(<span class="hljs-params">mutate,state</span>)=&gt;</span>&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;触发了subscribe&#x27;</span>,mutate,state)<br>    <span class="hljs-comment">// 此处可以进行数据变动的操作 例如保存到浏览器中</span><br>    localStroage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;count&#x27;</span>,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(state.<span class="hljs-property">sum</span>))<br>&#125;)<br></code></pre></td></tr></table></figure>
<h3 id="组合式写法"><a href="#组合式写法" class="headerlink" title="组合式写法"></a>组合式写法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;ref&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> &#123;defineStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCountStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;count&#x27;</span>,<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-keyword">const</span> sum = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;<br>        sum += <span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">bigAdd</span>(<span class="hljs-params"></span>)&#123;<br>        sum += <span class="hljs-number">10</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> &#123;sum,add,bigAdd&#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="传值"><a href="#传值" class="headerlink" title="传值"></a>传值</h2><h3 id="props"><a href="#props" class="headerlink" title="props"></a>props</h3><h4 id="父传子-props"><a href="#父传子-props" class="headerlink" title="父传子(props)"></a>父传子(props)</h4><p><code>父组件传递</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">Children</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/Children.vue&quot;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> car = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;奔驰&#x27;</span>)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Children</span> <span class="hljs-attr">:car</span>=<span class="hljs-string">&quot;car&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><code>子组件接收</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        &#123;&#123; car &#125;&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">&#x27;car&#x27;</span>])</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h4 id="子传父-props"><a href="#子传父-props" class="headerlink" title="子传父(props)"></a>子传父(props)</h4><p><code>子组件传递</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;setData(&#x27;你好!&#x27;)&quot;</span>&gt;</span>传递参数.<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">&#x27;setData&#x27;</span>])</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>第二种写法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;setData(&#x27;你好啊&#x27;)&quot;</span>&gt;</span>传递参数.<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> &#123;setData&#125; = <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">&#x27;setData&#x27;</span>])</span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">set</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-title function_">setData</span>(<span class="hljs-string">&#x27;你好啊!&#x27;</span>)</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><code>父组件接收</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">Children</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/Children.vue&quot;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> str = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;&quot;</span>)</span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params">value:string</span>)&#123;</span><br><span class="language-javascript">    str.<span class="hljs-property">value</span> = value</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span><br>    &#123;&#123; str &#125;&#125;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">Children</span> <span class="hljs-attr">:setData</span>=<span class="hljs-string">&quot;getData&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="自定义事件传值-emits"><a href="#自定义事件传值-emits" class="headerlink" title="自定义事件传值 (emits)"></a>自定义事件传值 (emits)</h3><p><code>子组件</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;emit(&#x27;send-name&#x27;,&#x27;被传递的值&#x27;)&quot;</span>&gt;</span>传递参数.<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">   <span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">&#x27;send-name&#x27;</span>]);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><code>父组件</code><br><code>send-name</code>是自定义事件,在子组件中通过<code>emit(&#39;send-name&#39;,&#39;被传递的值&#39;)</code>来触发,<br><code>&#39;send-name&#39;</code>是事件名,<code>&#39;被传递的值&#39;</code>是传递的值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">Children</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/Children.vue&quot;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> str = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;&quot;</span>)</span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params">value:string</span>)&#123;</span><br><span class="language-javascript">    str.<span class="hljs-property">value</span> = value</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span><br>    &#123;&#123; str &#125;&#125;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">Children</span> @<span class="hljs-attr">send-name</span>=<span class="hljs-string">&quot;getData&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="使用mitt插件传值-mitt"><a href="#使用mitt插件传值-mitt" class="headerlink" title="使用mitt插件传值 (mitt)"></a>使用mitt插件传值 (mitt)</h3><p>安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install mitt<br></code></pre></td></tr></table></figure>
<h3 id="创建emitter-ts"><a href="#创建emitter-ts" class="headerlink" title="创建emitter.ts"></a>创建emitter.ts</h3><p>新建文件夹<code>utils</code>,新建文件<code>emitter.ts</code><br>emitter实例有四个事件</p>
<ul>
<li>on 绑定事件</li>
<li>emit 触发事件</li>
<li>off 解绑事件</li>
<li>all 获取所有事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 引入</span><br><span class="hljs-keyword">import</span> mitt <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;mitt&#x27;</span><br><span class="hljs-comment">// 调用   emitter可以绑定和触发事件</span><br><span class="hljs-keyword">const</span> emitter = <span class="hljs-title function_">mitt</span>()<br><br><span class="hljs-comment">// 可以卸载emitter.ts中也可以写在组件中</span><br><span class="hljs-comment">// 绑定事件</span><br>emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;abc&#x27;</span>,<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;abc被触发了!!!&#x27;</span>)<br>&#125;)<br><span class="hljs-comment">// 触发事件</span><br>emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;abc&#x27;</span>)<br><br><span class="hljs-comment">// 暴露emitter</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> emitter<br></code></pre></td></tr></table></figure>
<p><code>main.js</code>引入<code>emitter</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> emitter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/emitter&#x27;</span><br></code></pre></td></tr></table></figure>
<h4 id="在组件中绑定和调用事件"><a href="#在组件中绑定和调用事件" class="headerlink" title="在组件中绑定和调用事件"></a>在组件中绑定和调用事件</h4><p><code>person.vue</code>中绑定事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> emitter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/emitter&#x27;</span><br>emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;abcd&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>&#125;)<br><span class="hljs-comment">// 推荐当组件销毁时解绑事件 释放内存</span><br><span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    emitter.<span class="hljs-title function_">off</span>(<span class="hljs-string">&#x27;abcd&#x27;</span>)<br>&#125;)<br></code></pre></td></tr></table></figure>
<p><code>about.vue</code>中触发事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> emitter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/emitter&#x27;</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">clickEvent</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;触发about中的abcd事件&quot;</span>);<br>    emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;abcd&#x27;</span>,<span class="hljs-number">666</span>)<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="v-model传参"><a href="#v-model传参" class="headerlink" title="v-model传参"></a>v-model传参</h3><p>解析<code>input v-model</code><br><code>v-model</code>运用在组件中 既包含父传子<code>:modelValue</code> 也包含子传父<code>emit(&#39;update:modelValue&#39;,666)</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;name&quot;</span> /&gt;</span><br><span class="hljs-comment">&lt;!-- 原理是 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;name&quot;</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;e =&gt; name = (&lt;HTMLInputElement&gt;e.target).value&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure>
<p>所以利用<code>v-model</code>给组件传值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">Input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&#x27;name&#x27;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Input</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 原理是 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">Input</span> <span class="hljs-attr">:modelValue</span>=<span class="hljs-string">&#x27;name&#x27;</span> @<span class="hljs-attr">update:modelValue</span>=<span class="hljs-string">&quot;name = $event&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Input</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>利用<code>v-model</code>给组件传值</p>
<ul>
<li><code>templete</code>中的<code>modelValue</code>是<code>Input</code>组件中的<code>:modelValue</code></li>
<li><code>emit</code>中的<code>update:modelValue</code>是<code>Input</code>组件中的<code>:update:modelValue</code></li>
<li><code>$event.target</code> 是原生html标签 所以需要添加target,如果是组件中的<code>$event</code>不需要添加target</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;modelValue&quot;</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;emit(&#x27;update:modelValue&#x27;,$event.target.value)&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">&#x27;modelValue&#x27;</span>])</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">&#x27;update:modelValue&#x27;</span>])</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h4 id="传多个v-model"><a href="#传多个v-model" class="headerlink" title="传多个v-model"></a>传多个v-model</h4><p>传递</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 一个组件引用两个input标签 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">Input</span> <span class="hljs-attr">v-model:name</span>=<span class="hljs-string">&#x27;username&#x27;</span> <span class="hljs-attr">v-model:pwd</span>=<span class="hljs-string">&#x27;password&#x27;</span> /&gt;</span><br></code></pre></td></tr></table></figure>
<p>接收</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;name&quot;</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;emit(&#x27;update:name&#x27;,$event.target.value)&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;pwd&quot;</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;emit(&#x27;update:pwd&#x27;,$event.target.value)&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">&#x27;name&#x27;</span>,<span class="hljs-string">&#x27;pwd&#x27;</span>])</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">&#x27;update:name&#x27;</span>,<span class="hljs-string">&#x27;update:pwd&#x27;</span>])</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="利用-attrs进行-祖→孙-传值"><a href="#利用-attrs进行-祖→孙-传值" class="headerlink" title="利用$attrs进行(祖→孙)传值"></a>利用$attrs进行(祖→孙)传值</h3><p><code>祖组件</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Father</span> <span class="hljs-attr">:a</span>=<span class="hljs-string">&#x27;a&#x27;</span> <span class="hljs-attr">:b</span>=<span class="hljs-string">&#x27;b&#x27;</span> <span class="hljs-attr">:c</span>=<span class="hljs-string">&#x27;c&#x27;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">import</span> <span class="hljs-title class_">Father</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/Father.vue&quot;</span></span><br><span class="language-javascript">    <span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> a = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;1&#x27;</span>)</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> b = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;1&#x27;</span>)</span><br><span class="language-javascript">    <span class="hljs-comment">// 传递方法</span></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">c</span>(<span class="hljs-params">val</span>)&#123;</span><br><span class="language-javascript">        a.<span class="hljs-property">value</span> += val</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><code>父组件</code><br>在父组件中没有被<code>defineProps</code>的属性都会被保存在<code>$attrs</code>中</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Father</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">&#x27;$attrs&#x27;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><code>子组件</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    &#123;&#123; a &#125;&#125;<br>    &#123;&#123; b &#125;&#125;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;c(10)&quot;</span>&gt;</span>点击<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>])</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="父组件获取多个子组件数据-refs"><a href="#父组件获取多个子组件数据-refs" class="headerlink" title="父组件获取多个子组件数据($refs)"></a>父组件获取多个子组件数据($refs)</h3><p><code>子组件1</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">const</span> a = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;1&#x27;</span>)<br><span class="hljs-title function_">defineExpose</span>(&#123;a&#125;)<br></code></pre></td></tr></table></figure>
<p><code>子组件2</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">const</span> a = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;10&#x27;</span>)<br><span class="hljs-title function_">defineExpose</span>(&#123;a&#125;)<br></code></pre></td></tr></table></figure>
<p><code>父组件</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&#x27;getDatas($refs)&#x27;</span>&gt;</span>获取子组件数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Child1</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#x27;c1&#x27;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Child2</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#x27;c2&#x27;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">import</span> <span class="hljs-title class_">Child1</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/Child1.vue&quot;</span></span><br><span class="language-javascript">    <span class="hljs-keyword">import</span> <span class="hljs-title class_">Child2</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/Child2.vue&quot;</span></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">getDatas</span>(<span class="hljs-params">refs:object</span>)&#123;  <span class="hljs-comment">// :&#123;[key:string]:any&#125;</span></span><br><span class="language-javascript">        <span class="hljs-comment">// refs =&gt; &#123;c1:Proxy&#123;&#125;,c2:Proxy&#123;&#125;&#125;</span></span><br><span class="language-javascript">        <span class="hljs-comment">// 获取到以后就可以进行赋值了</span></span><br><span class="language-javascript">        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> refs)&#123;</span><br><span class="language-javascript">            refs[key].<span class="hljs-property">a</span>.<span class="hljs-property">value</span> += <span class="hljs-number">10</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="子组件通过-parent-获取父组件数据"><a href="#子组件通过-parent-获取父组件数据" class="headerlink" title="子组件通过($parent)获取父组件数据"></a>子组件通过($parent)获取父组件数据</h3><p><code>父组件</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&#x27;getDatas($refs)&#x27;</span>&gt;</span>获取子组件数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Child1</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#x27;c1&#x27;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">import</span> <span class="hljs-title class_">Child1</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/Child1.vue&quot;</span></span><br><span class="language-javascript">    <span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> num = <span class="hljs-title function_">ref</span>(<span class="hljs-number">10</span>)</span><br><span class="language-javascript">    <span class="hljs-title function_">defineExpose</span>(&#123;num&#125;) <span class="hljs-comment">//需要暴露</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><code>子组件1</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&#x27;setDatas($parent)&#x27;</span>&gt;</span>获取子组件数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">setDatas</span>(<span class="hljs-params">parent:any</span>)&#123;</span><br><span class="language-javascript">        parent.<span class="hljs-property">num</span> += <span class="hljs-number">10</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="祖孙直接传值-provide-inject"><a href="#祖孙直接传值-provide-inject" class="headerlink" title="祖孙直接传值(provide&#x3D;&gt;inject)"></a>祖孙直接传值(provide&#x3D;&gt;inject)</h3><p><code>祖组件</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref ,provide &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Person</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/Person.vue&#x27;</span><br><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br><span class="hljs-comment">// 被传递的函数</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">addCount</span>(<span class="hljs-params">val</span>)&#123;<br>  count.<span class="hljs-property">value</span> -= val<br>&#125;<br><span class="hljs-comment">// 祖组件给子组件传值 可以传字符也可以传对象</span><br><span class="hljs-title function_">provide</span>(<span class="hljs-string">&#x27;countContext&#x27;</span>, &#123;count,addCount&#125;)<br></code></pre></td></tr></table></figure>
<p><code>孙组件</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addCount(10)&quot;</span>&gt;</span>祖组件减10<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>        &#123;&#123; count &#125;&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">import</span> &#123; ref ,inject&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript">    <span class="hljs-comment">// 接收祖组件传递过来的数据 第二参数为默认值</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> &#123;count,addCount&#125; = <span class="hljs-title function_">inject</span>(<span class="hljs-string">&#x27;countContext&#x27;</span>,&#123;<span class="hljs-attr">count</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">addCount</span>:<span class="hljs-function">(<span class="hljs-params">val:number</span>)=&gt;</span>&#123;&#125;&#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h2 id="插槽-slot"><a href="#插槽-slot" class="headerlink" title="插槽 slot"></a>插槽 slot</h2><p>三种插槽:</p>
<ul>
<li>默认插槽</li>
<li>具名插槽</li>
<li>作用域插槽</li>
</ul>
<h3 id="默认插槽"><a href="#默认插槽" class="headerlink" title="默认插槽"></a>默认插槽</h3><p><code>父组件</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">Person</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;插槽的title&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>插槽的内容<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">Person</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><code>子组件</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 如果没有传递插槽则显示默认值 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span>插槽的默认值<span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">&#x27;title&#x27;</span>])</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h3><p><code>父组件</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">Person</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 第一种写法 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:s1</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>插槽的title<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 第二种简写(常用) --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">s2</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>插槽的内容<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">Person</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><code>子组件</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&#x27;s1&#x27;</span>&gt;</span>默认title<span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&#x27;s2&#x27;</span>&gt;</span>默认内容<span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h3><p>数据在子组件中维护,结构在插槽中设置<br><code>父组件</code><br><code>params</code>接收从子组件传递过来的数据,类似<code>props</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"> <span class="hljs-tag">&lt;<span class="hljs-name">Person</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot</span>=<span class="hljs-string">&quot;params&quot;</span>&gt;</span><br>        &#123;&#123;params&#125;&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 设置名字 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:qwe</span>=<span class="hljs-string">&quot;params&quot;</span>&gt;</span><br>        &#123;&#123;params&#125;&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 解构 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot</span>=<span class="hljs-string">&quot;&#123;params&#125;&quot;</span>&gt;</span><br>        &#123;&#123;params&#125;&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">Person</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><code>子组件</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> str = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;你好啊&#x27;</span>)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 传递参数 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">:params</span>=<span class="hljs-string">&quot;str&quot;</span>&gt;</span>插槽的默认值<span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&#x27;qwe&#x27;</span> <span class="hljs-attr">:params</span>=<span class="hljs-string">&quot;str&quot;</span>&gt;</span>插槽的默认值<span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h2 id="其他API接口"><a href="#其他API接口" class="headerlink" title="其他API接口"></a>其他API接口</h2><h3 id="shallowRef-shallowReactive"><a href="#shallowRef-shallowReactive" class="headerlink" title="shallowRef &amp; shallowReactive"></a>shallowRef &amp; shallowReactive</h3><p>浅层声明,只监听第一层数据<br>深层数据改动不会触发监听</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; shallowRef,shallowReactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">shallowRef</span>(<span class="hljs-number">0</span>) <span class="hljs-comment">// 浅层声明</span><br></code></pre></td></tr></table></figure>
<h3 id="readonly-shallowReadonly"><a href="#readonly-shallowReadonly" class="headerlink" title="readonly &amp; shallowReadonly"></a>readonly &amp; shallowReadonly</h3><p><code>readonly</code>只读声明,数据全部只读,包括深层数据<br><code>shallowReadonly</code>只监听第一层数据,深层数据可以修改<br>在为<code>ref</code>数据添加<code>readonly</code>时候不能添加<code>.value</code><br><code>count2</code>为只读,但是<code>count1</code>还是可以修改的,修改<code>count1</code>的时候,<code>count2</code>也会跟着改变<br>这是一种对数据的保护,如果对数据修改会报错</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref,reactive,readonly,shallowReadonly &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">const</span> count1 = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>) <span class="hljs-comment">// 浅层声明</span><br><span class="hljs-keyword">const</span> count2 = <span class="hljs-title function_">readonly</span>(count1) <span class="hljs-comment">// 只读声明</span><br>count2.<span class="hljs-property">value</span> += <span class="hljs-number">10</span> <span class="hljs-comment">// 报错</span><br><span class="hljs-keyword">const</span> obj = <span class="hljs-title function_">reactive</span>(&#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;汽车列表&#x27;</span>,<br>    <span class="hljs-attr">car</span>:[&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;奔驰&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">100</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;宝马&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">200</span>&#125;]<br>&#125;)<br><span class="hljs-keyword">const</span> obj2 = <span class="hljs-title function_">readonly</span>(obj) <span class="hljs-comment">// 只读声明</span><br>obj2.<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;汽车列表2&#x27;</span> <span class="hljs-comment">// 报错</span><br>obj2.<span class="hljs-property">car</span>[<span class="hljs-number">0</span>].<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;奥迪&#x27;</span> <span class="hljs-comment">// 不会报错</span><br></code></pre></td></tr></table></figure>
<h3 id="toRaw-markRaw"><a href="#toRaw-markRaw" class="headerlink" title="toRaw &amp; markRaw"></a>toRaw &amp; markRaw</h3><p><code>toRaw</code>获取响应式数据的原始数据<br>不建议长期使用(不要给他声明变量,防止搞乱数据结构)<br><code>markRaw</code>标记数据为原始数据,永远不会被变成响应式数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref,reactive,toRaw,markRaw &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">const</span> count1 = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>) <span class="hljs-comment">// 响应式数据</span><br><span class="hljs-title function_">toRaw</span>(count1) <span class="hljs-comment">// 获取到的原始数据</span><br><br><span class="hljs-keyword">const</span> obj = <span class="hljs-title function_">markRaw</span>(&#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;汽车列表&#x27;</span>,<br>&#125;)<br><span class="hljs-keyword">const</span> obj2 = <span class="hljs-title function_">reactive</span>(obj) <span class="hljs-comment">// 不会变成响应式数据</span><br></code></pre></td></tr></table></figure>
<h3 id="自定义ref-customRef"><a href="#自定义ref-customRef" class="headerlink" title="自定义ref(customRef)"></a>自定义ref(customRef)</h3><p>实际应用中不会只使用<code>custionRef</code>来创建响应式数据<br>可以使用<code>custionRef</code>配合<code>hooks</code>来创建自定义的响应式数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; customRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">let</span> initValue = <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">customRef</span>(<span class="hljs-function">(<span class="hljs-params">track,trigger</span>)=&gt;</span>&#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-title function_">track</span>() <span class="hljs-comment">// 持续追踪</span><br>            <span class="hljs-keyword">return</span> initValue<br>        &#125;<br>        <span class="hljs-title function_">set</span>(<span class="hljs-params">val</span>)&#123;<br>            initValue = val<br>            <span class="hljs-title function_">trigger</span>() <span class="hljs-comment">// 触发监听(通知vue数据发生了变化)</span><br>        &#125;<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>
<h3 id="teleport-传送门"><a href="#teleport-传送门" class="headerlink" title="teleport 传送门"></a>teleport 传送门</h3><p>把<code>teleport</code>中的内容移动到指定位置</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 把h1移动到#app的根目录 #app是选择器 也可以试是 body .name --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">teleport</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;#app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>teleport<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">teleport</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="suspsense-异步组件"><a href="#suspsense-异步组件" class="headerlink" title="suspsense 异步组件"></a>suspsense 异步组件</h3><p>实验性功能<br>子组件异步加载,当子组件加载完成的时候才会显示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs `html">&lt;template&gt;<br>    &lt;suspense&gt;<br>        &lt;!-- 加载完成后显示的内容 --&gt;<br>        &lt;template #default&gt;<br>            &lt;h1&gt;suspense&lt;/h1&gt;<br>            &lt;button @click=&quot;show = !show&quot;&gt;切换&lt;/button&gt;<br>        &lt;template&gt;<br>        &lt;!-- 等待加载时候显示的内容 --&gt;<br>        &lt;template #fallback&gt;<br>            &lt;h1&gt;加载中...&lt;/h1&gt;<br>        &lt;template&gt;<br>    &lt;/suspense&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>
<p><code>子组件</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 连续解构赋值 </span><br><span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">result</span>:&#123;content&#125;&#125; = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;https://www.runoob.com/try/demo_ajax_json.php&#x27;</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(content)<br></code></pre></td></tr></table></figure>

<h2 id="使用全局构建版本-cdn引用"><a href="#使用全局构建版本-cdn引用" class="headerlink" title="使用全局构建版本 cdn引用"></a>使用全局构建版本 cdn引用</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> &#123; createApp &#125; = <span class="hljs-title class_">Vue</span></span><br><span class="language-javascript">  <span class="hljs-title function_">createApp</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span></span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;).<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="使用ES模块构建版本"><a href="#使用ES模块构建版本" class="headerlink" title="使用ES模块构建版本"></a>使用ES模块构建版本</h3><p><strong>注意我们使用了 <code>&lt;script type=&quot;module&quot;&gt;</code>，且导入的 CDN URL 指向的是 Vue 的 ES 模块构建版本</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;https://unpkg.com/vue@3/dist/vue.esm-browser.js&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-title function_">createApp</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span></span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;).<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="导入映射表"><a href="#导入映射表" class="headerlink" title="导入映射表"></a>导入映射表</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;importmap&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  &#123;</span><br><span class="language-javascript">    <span class="hljs-string">&quot;imports&quot;</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-string">&quot;vue&quot;</span>: <span class="hljs-string">&quot;https://unpkg.com/vue@3/dist/vue.esm-browser.js&quot;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-title function_">createApp</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span></span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;).<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="拆分模块"><a href="#拆分模块" class="headerlink" title="拆分模块"></a>拆分模块</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- index.html --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">MyComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./my-component.js&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">MyComponent</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// my-component.js</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> &#125;<br>  &#125;,<br>  <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;count is &#123;&#123; count &#125;&#125;&lt;/div&gt;`</span><br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="应用配置"><a href="#应用配置" class="headerlink" title="应用配置"></a>应用配置</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-property">config</span>.<span class="hljs-property">errorHandler</span> = <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">/* 处理错误 */</span><br>&#125;<br><span class="hljs-comment">//注册一个组件</span><br>app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;TodoDeleteButton&#x27;</span>, <span class="hljs-title class_">TodoDeleteButton</span>)<br></code></pre></td></tr></table></figure>




        </div>
    </article>
    <div class="w300 m-l-15 fixed-item-right">
        <div class="hot-list">
    <div class="f14 hot-list-title">推荐阅读</div>
    <ul>
        
            <li>
                <a href="/2023/07/06/js-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%88%97%E9%98%9F.html">js创建一个列队</a>
                <p>2023-07-06</p>
            </li>
        
            <li>
                <a href="/2023/06/21/vuex%E7%AE%80%E5%8D%95demo.html">vuex简单demo</a>
                <p>2023-06-21</p>
            </li>
        
            <li>
                <a href="/2024/03/25/%E7%8E%A9%E5%AE%A2%E4%BA%91%E5%AE%89%E8%A3%85casaos.html">玩客云安装casaos</a>
                <p>2024-03-25</p>
            </li>
        
            <li>
                <a href="/2023/02/14/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E8%BF%9B%E5%BA%A6.html">文件加载进度</a>
                <p>2023-02-14</p>
            </li>
        
            <li>
                <a href="/2023/11/22/koa2%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1404%E4%BF%A1%E6%81%AF.html">koa配置路由404信息</a>
                <p>2023-11-22</p>
            </li>
        
    </ul>
    <!-- <ul>
        
            <li>
                <a href="/2023/07/06/js-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%88%97%E9%98%9F.html">js创建一个列队</a>
                <p>2023-07-06</p>
            </li>
        
            <li>
                <a href="/2023/06/21/vuex%E7%AE%80%E5%8D%95demo.html">vuex简单demo</a>
                <p>2023-06-21</p>
            </li>
        
            <li>
                <a href="/2024/03/25/%E7%8E%A9%E5%AE%A2%E4%BA%91%E5%AE%89%E8%A3%85casaos.html">玩客云安装casaos</a>
                <p>2024-03-25</p>
            </li>
        
            <li>
                <a href="/2023/02/14/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E8%BF%9B%E5%BA%A6.html">文件加载进度</a>
                <p>2023-02-14</p>
            </li>
        
            <li>
                <a href="/2023/11/22/koa2%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1404%E4%BF%A1%E6%81%AF.html">koa配置路由404信息</a>
                <p>2023-11-22</p>
            </li>
        
    </ul> -->
</div>
        <div class="m-t-15"></div>
        <div class="tag-list">
    <div class="f14 tag-list-title">标签列表</div>
    <div class="flex flex-wrap flex-jus-start flex-item-start tag-list-content">
        
            <a href="/tag/%E7%BD%91%E8%B5%9A/">网赚(7)</a>
        
            <a href="/tag/ai/">AI(7)</a>
        
            <a href="/tag/%E7%8E%84%E5%AD%A6/">玄学(2)</a>
        
            <a href="/tag/chatgpt/">chatgpt(2)</a>
        
            <a href="/tag/js/">js(184)</a>
        
            <a href="/tag/ffmpeg/">ffmpeg(11)</a>
        
            <a href="/tag/hexo/">Hexo(5)</a>
        
            <a href="/tag/canvas/">canvas(5)</a>
        
            <a href="/tag/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库(12)</a>
        
            <a href="/tag/paddledetection/">PaddleDetection(4)</a>
        
            <a href="/tag/stablediffusion/">StableDiffusion(6)</a>
        
            <a href="/tag/linux/">linux(24)</a>
        
            <a href="/tag/ajax/">ajax(1)</a>
        
            <a href="/tag/astro/">astro(3)</a>
        
            <a href="/tag/axios/">axios(2)</a>
        
            <a href="/tag/bat/">bat(9)</a>
        
            <a href="/tag/%E6%BF%80%E6%B4%BB%E7%A0%81/">激活码(2)</a>
        
            <a href="/tag/node/">node(59)</a>
        
            <a href="/tag/css/">css(19)</a>
        
            <a href="/tag/dns/">dns(7)</a>
        
            <a href="/tag/go/">go(59)</a>
        
            <a href="/tag/docker/">docker(1)</a>
        
            <a href="/tag/echarts/">echarts(2)</a>
        
            <a href="/tag/charts/">charts(1)</a>
        
            <a href="/tag/electron/">electron(1)</a>
        
            <a href="/tag/git/">git(2)</a>
        
            <a href="/tag/vps/">vps(9)</a>
        
            <a href="/tag/html/">html(7)</a>
        
            <a href="/tag/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">移动端(11)</a>
        
            <a href="/tag/vue/">vue(40)</a>
        
            <a href="/tag/jquery/">jquery(7)</a>
        
            <a href="/tag/video/">video(2)</a>
        
            <a href="/tag/typescript/">typescript(4)</a>
        
            <a href="/tag/websocket/">websocket(5)</a>
        
            <a href="/tag/%E5%BE%AE%E4%BF%A1/">微信(5)</a>
        
            <a href="/tag/php/">php(14)</a>
        
            <a href="/tag/ios/">ios(2)</a>
        
            <a href="/tag/koa2/">koa2(14)</a>
        
            <a href="/tag/%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86/">视频处理(4)</a>
        
            <a href="/tag/%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/">测试环境(1)</a>
        
            <a href="/tag/%E7%BC%96%E8%BE%91%E5%99%A8/">编辑器(1)</a>
        
            <a href="/tag/markdown/">markdown(1)</a>
        
            <a href="/tag/sql/">sql(1)</a>
        
            <a href="/tag/nginx/">nginx(2)</a>
        
            <a href="/tag/vue3/">vue3(1)</a>
        
            <a href="/tag/express/">express(2)</a>
        
            <a href="/tag/mysql/">mysql(2)</a>
        
            <a href="/tag/npm/">npm(2)</a>
        
            <a href="/tag/ocr/">ocr(1)</a>
        
            <a href="/tag/%E5%9B%BD%E5%AD%A6/">国学(9)</a>
        
            <a href="/tag/%E7%88%AC%E8%99%AB/">爬虫(20)</a>
        
            <a href="/tag/cmd/">cmd(1)</a>
        
            <a href="/tag/nuxt/">nuxt(3)</a>
        
            <a href="/tag/ai/">ai(1)</a>
        
            <a href="/tag/ps/">PS(2)</a>
        
            <a href="/tag/pm2/">pm2(1)</a>
        
            <a href="/tag/python/">python(17)</a>
        
            <a href="/tag/react/">react(4)</a>
        
            <a href="/tag/svg/">svg(2)</a>
        
            <a href="/tag/threejs/">threejs(2)</a>
        
            <a href="/tag/tvbox/">tvbox(1)</a>
        
            <a href="/tag/unity/">unity(1)</a>
        
            <a href="/tag/demo/">Demo(1)</a>
        
            <a href="/tag/%E5%AE%B9%E5%99%A8/">容器(2)</a>
        
            <a href="/tag/vscode/">vscode(1)</a>
        
            <a href="/tag/pinia/">pinia(1)</a>
        
            <a href="/tag/vue-router/">vue-router(1)</a>
        
            <a href="/tag/vuex/">vuex(1)</a>
        
            <a href="/tag/webpack/">webpack(2)</a>
        
            <a href="/tag/%E4%B8%AD%E5%8C%BB/">中医(15)</a>
        
            <a href="/tag/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1/">企业微信(1)</a>
        
            <a href="/tag/%E5%85%B6%E4%BB%96/">其他(7)</a>
        
            <a href="/tag/emoji/">emoji(4)</a>
        
            <a href="/tag/%E7%BE%8E%E9%A3%9F/">美食(6)</a>
        
            <a href="/tag/%E5%89%8D%E7%AB%AF/">前端(2)</a>
        
            <a href="/tag/%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86/">加密解密(2)</a>
        
            <a href="/tag/%E5%85%B5%E6%B3%95/">兵法(3)</a>
        
            <a href="/tag/%E6%B1%89%E5%AD%97/">汉字(3)</a>
        
            <a href="/tag/%E6%91%A9%E6%89%98%E8%BD%A6/">摩托车(1)</a>
        
            <a href="/tag/%E5%B0%8F%E7%9A%AE/">小皮(1)</a>
        
            <a href="/tag/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">微信小程序(1)</a>
        
            <a href="/tag/date/">Date(1)</a>
        
            <a href="/tag/cookie/">cookie(1)</a>
        
            <a href="/tag/localstorage/">localStorage(1)</a>
        
            <a href="/tag/indexdb/">indexDB(1)</a>
        
            <a href="/tag/%E6%A8%A1%E6%9D%BF/">模板(1)</a>
        
            <a href="/tag/json/">json(1)</a>
        
            <a href="/tag/%E8%AF%BB%E4%B9%A6%E4%BC%9A/">读书会(1)</a>
        
            <a href="/tag/%E5%B0%8F%E5%90%83/">小吃(1)</a>
        
            <a href="/tag/%E5%87%8F%E8%82%A5/">减肥(1)</a>
        
    </div>
</div>


    </div>
</div>
<script>
    function addCopyButtons() {
        // 获取所有代码块
        const codeBlocks = document.querySelectorAll('pre code');
        
        codeBlocks.forEach((codeBlock) => {
            // 创建复制按钮
            const copyButton = document.createElement('i');
            copyButton.className = 'copy-button fa fa-copy';
            
            // 查找最近的 .highlight 父元素
            const highlightBlock = codeBlock.closest('.highlight');
            if (highlightBlock) {
                highlightBlock.insertBefore(copyButton, highlightBlock.firstChild);
            }
            
            // 添加点击事件
            copyButton.addEventListener('click', () => {
                // 获取格式化的代码内容
                const code = codeBlock.innerText || codeBlock.textContent;
                
                // 使用 textarea 来保持文本格式
                const textarea = document.createElement('textarea');
                textarea.value = code;
                textarea.style.position = 'fixed';
                textarea.style.opacity = '0';
                document.body.appendChild(textarea);
                textarea.select();
                
                try {
                    // 尝试使用新的 API
                    navigator.clipboard.writeText(code).then(() => {
                        copyButton.className = 'copy-button fa fa-check';
                        setTimeout(() => {
                            copyButton.className = 'copy-button fa fa-copy';
                        }, 2000);
                    });
                } catch (err) {
                    // 降级方案：使用 document.execCommand
                    document.execCommand('copy');
                    copyButton.className = 'copy-button fa fa-check';
                    setTimeout(() => {
                        copyButton.className = 'copy-button fa fa-copy';
                    }, 2000);
                }
                
                // 清理临时元素
                document.body.removeChild(textarea);
            });
        });
    }
    // 页面加载完成后添加复制按钮
document.addEventListener('DOMContentLoaded', addCopyButtons);

</script>
    </div>
    <footer>
    <div>
        copyright © 2024 Gary Wang 
    </div>
</footer>
    <div class="search-page animated">
    <div class="search-page-content">
        <i class="fa fa-times search-close"></i>
        <h1>内容搜索</h1>
        <form onsubmit="formSubmit(event)" class="search-page-form re">
            <input type="text" placeholder="查找" name="keyword" id="search-input" autocomplete="off">
            <button>
                <i class="fa fa-search"></i>
            </button>
        </form>
        <div class="search-page-result" id="search-result">
        </div>
    </div>
    <div class="search-page-bg"></div>
</div>
<script>
    //所有搜索数据
    let searchData = [];
    
    // 加载搜索数据
    fetch('/search.xml')
        .then(response => response.text())
        .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
        .then(data => {
            searchData = Array.from(data.getElementsByTagName('entry')).map(entry => ({
                title: entry.getElementsByTagName('title')[0].textContent,
                content: entry.getElementsByTagName('content')[0].textContent,
                url: entry.getElementsByTagName('url')[0].textContent
            }));
        });

    // 搜索功能实现
    function formSubmit(event) {
        event.preventDefault();
        // 搜索关键词
        const keyword = document.getElementById('search-input').value.toLowerCase();
        // 搜索结果
        const results = searchData.filter(item => 
            item.title.toLowerCase().includes(keyword) || item.content.toLowerCase().includes(keyword)
        );
        const resultDiv = document.getElementById('search-result');
        if(results.length === 0 || keyword === ''){
            resultDiv.innerHTML = '<div class="search-page-result-item t-c f13">没有找到相关内容</div>';
        }else{
            resultDiv.innerHTML = results.map(item => `
                <div class="search-page-result-item">
                    <a href="${item.url}">
                        <h5>${item.title}</h5>
                    </a>
                </div>
            `).join('');
        }
    }
    document.querySelector('.search-close').addEventListener('click',function(){
        hideSearchPage()
    })
</script>
    <!-- <div class="gotopage" id="gotopage">
        <i class="far fa-arrow-alt-circle-up"></i>
    </div> -->
    <script src="/assets/js/common.js"></script>
    <script src="/assets/js/func.js"></script>
    <script src="/assets/live2dw/lib/L2Dwidget.js"></script>
    <script>
        // 加载动画
        window.addEventListener('DOMContentLoaded',function(){
            setTimeout(function() {
                document.querySelector('.loading').style.display = 'none';
            },800)
        },false)
        
        /* 看板娘 */
        L2Dwidget.init({
            "pluginRootPath"  : "/assets/live2dw/",
            "pluginJsPath"	  : "/assets/live2dw/lib/",
            "pluginModelPath" : "/assets/live2dw/assets/",
            "tagMode"		  : false,
            "debug"			  : false,
            "model"			  : {
                "jsonPath" : "/assets/live2dw/assets/kesshouban.model.json"
            },
            "display" : {
                "position" : "right",
                "width"	   : 250,
                "height"   : 250,
                "hOffset"  : -70,
                "vOffset"  : 60
            },
            "dialog"	: {
                "enable" : true
            },
            "mobile"	: {
                "show" : true
            },
            "react"		: {
                "opacity" : 1
            },
            "log" : false
        });
        const addEvent = function(){
            const live2dWidget = document.getElementById('live2d-widget')
            setTimeout(function(){
                if(live2dWidget){
                    live2dWidget.addEventListener('click',function(e){
                        document.querySelector('.main').scrollTo({
                            top: 0,
                            behavior: 'smooth'
                        });
                    })
                }else{
                    addEvent()
                }
            },1000)
        }
        addEvent()
    </script>
    <!-- Cloudflare Web Analytics -->
    <!-- <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "5bd3afcce7474fcdbf639fab1999e804"}'></script> -->
    <!-- End Cloudflare Web Analytics -->
    <!-- <script src='//unpkg.com/@waline/client/dist/waline.js'></script>
    <link href='//unpkg.com/@waline/client/dist/waline.css' rel='stylesheet'/> -->
</body>
</html>